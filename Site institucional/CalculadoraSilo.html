<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style1.css">
</head>

<body>
    <div class="header" id="header">
        <div class="header-container">  
            <h1 class="titulo" onclick="window.location.href='homepage.html'" style="cursor: pointer;">Silo Tech</h1>

            <ul class="navbar">
                <li>
                    <a href="homepage.html#servicos">Serviços</a>
                </li>
                <li>
                    <a href="CalculadoraSilo.html">Simulador</a>
                </li>
                <li>
                    <a href="sobre.html">Sobre Nós</a>
                </li>
                <li>|</li>
                <li>
                    <a href="login.html">Login</a>
                </li>
                <li>
                    <a href="cadastro.html">Cadastro</a>
                </li>
            </ul>
        </div>
    </div>

    <div class="container-calculadora">
        <div class="titulo">
            <h1>SIMULADOR FINANCEIRO - SILO TECH</h1>
        </div>
        <div id="div1">
            Quantidade de silos: <input type="number" id="inputSilos"> <br>
        </div>

        <div id="div2">
            Eles estão próximos?
            <select id="selectProximo">
                <option>Sim</option>
                <option>Não</option>
            </select>
            <br>
        </div>

        <div id="div3">
            Valor da cota de soja: <input type="number" id="inputSoja">
        </div>

        <button onclick="verificar()">Ver Silos</button>

        
        
        <div id="div_mensagem"></div>
        <div id="div4">
            <button onclick="calcular()">Calcular</button>
        </div>
        <div id="div_mensagem1"></div>
        <div id="div_mensagem2"></div>
        <div id="div_mensagem3"></div>
        <div id="div_mensagem4"></div>
        

    </div>

    <div class="footer">
        <div class="container">
            <div>
                <h1 class="titulo">SiloTech</h1>
            </div>
            <div class="fale-conosco">
                <p class="p-fale-conosco"><a href="faleConosco.html" class="a-fale-conosco">Fale conosco</a></p>
                <h4 class="h4">© 2024 Silo Tech - Todos direitos reservados.</h4>
            </div>
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="#fbaf00" viewBox="0 0 256 256">
                    <path
                        d="M232,128a104.16,104.16,0,0,1-91.55,103.26,4,4,0,0,1-4.45-4V152h24a8,8,0,0,0,8-8.53,8.17,8.17,0,0,0-8.25-7.47H136V112a16,16,0,0,1,16-16h16a8,8,0,0,0,8-8.53A8.17,8.17,0,0,0,167.73,80H152a32,32,0,0,0-32,32v24H96a8,8,0,0,0-8,8.53A8.17,8.17,0,0,0,96.27,152H120v75.28a4,4,0,0,1-4.44,4A104.15,104.15,0,0,1,24.07,124.09c2-54,45.74-97.9,99.78-100A104.12,104.12,0,0,1,232,128Z">
                    </path>
                </svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="#fbaf00" viewBox="0 0 256 256">
                    <path
                        d="M215,219.85a8,8,0,0,1-7,4.15H160a8,8,0,0,1-6.75-3.71l-40.49-63.63L53.92,221.38a8,8,0,0,1-11.84-10.76l61.77-68L41.25,44.3A8,8,0,0,1,48,32H96a8,8,0,0,1,6.75,3.71l40.49,63.63,58.84-64.72a8,8,0,0,1,11.84,10.76l-61.77,67.95,62.6,98.38A8,8,0,0,1,215,219.85Z">
                    </path>
                </svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="#fbaf00" viewBox="0 0 256 256">
                    <path
                        d="M216,24H40A16,16,0,0,0,24,40V216a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V40A16,16,0,0,0,216,24ZM96,176a8,8,0,0,1-16,0V112a8,8,0,0,1,16,0ZM88,96a12,12,0,1,1,12-12A12,12,0,0,1,88,96Zm96,80a8,8,0,0,1-16,0V140a20,20,0,0,0-40,0v36a8,8,0,0,1-16,0V112a8,8,0,0,1,15.79-1.78A36,36,0,0,1,184,140Z">
                    </path>
                </svg>
            </div>
        </div>
    </div>
</body>

</html>

<script>

    div1.style.display = 'block'
    div2.style.display = 'none'
    div3.style.display = 'block'
    div4.style.display = 'none'

    function verificar() {
        var silo = Number(inputSilos.value)
        var mensagem = ''
        div_mensagem1.innerHTML = ''
        div_mensagem2.innerHTML = ''
        div_mensagem3.innerHTML = ''

        for (var contador = 1; contador <= silo; contador++) {
            mensagem += `
                <div style="display: inline-table;">
                    <img src="silo.png" onclick="clicarSilo(${contador})" id="silo${contador}" style="cursor: pointer;background-color: #fff;">
                    <div id="inputContainer${contador}" style="display:none; ">
                        Capacidade do silo em toneladas: <input type="number" id="inputCapacidade${contador}"style="width: 80px; "><br>
                        Preço do Silo: <input type="number" id="inputPreco${contador}"style="width: 80px;"><br>
                        Preenchimento do silo atual: <select id="inputPreenchimento${contador}"style="width: 80px;">
                                                                <option value="0">0%</option>
                                                                <option value="20">20%</option>
                                                                <option value="40">40%</option>
                                                                <option value="60">60%</option>
                                                                <option value="80">80%</option>
                                                                <option value="100">100%</option>
                                                            </select>
                    </div>
                </div>
                `
        }

        if (silo > 1) {
            div1.style.display = 'block'
            div2.style.display = 'block'
            div3.style.display = 'block'
            div4.style.display = 'block'
        } else {
            div1.style.display = 'block'
            div2.style.display = 'none'
            div3.style.display = 'block'
            div4.style.display = 'block'
        }


        div_mensagem.innerHTML = mensagem

    }

    function clicarSilo(siloId) {
        var inputContainer = document.getElementById(`inputContainer${siloId}`)
        if (inputContainer.style.display == 'none') {
            inputContainer.style.display = 'table-row'
        } else {
            inputContainer.style.display = 'none'
        }
    }


    function calcular() {
        var totalCapacidade = 0
        var totalPreenchimento = 0
        var totalPreco = 0
        var proximo = selectProximo.value
        var soja = Number(inputSoja.value)
        var silo = Number(inputSilos.value)

        for (var contador = 1; contador <= silo; contador++) {
            var capacidade = Number(document.getElementById(`inputCapacidade${contador}`).value)
            var preenchimento = Number(document.getElementById(`inputPreenchimento${contador}`).value)
            var preco = Number(document.getElementById(`inputPreco${contador}`).value)

            totalCapacidade += capacidade
            totalPreenchimento += (capacidade * preenchimento / 100)
            totalPreco += preco
        }

        var perdaSoja = (totalPreenchimento * 1000 / 60) * soja

        // Exibe os resultados
        div_mensagem1.innerHTML = `Capacidade total: ${totalCapacidade} toneladas`
        div_mensagem2.innerHTML = `Preenchimento total: ${totalPreenchimento.toFixed(0)} toneladas`
        div_mensagem3.innerHTML = `O preco total dos silos são de R$${totalPreco}<br>`

        if (proximo == 'Sim') {
            div_mensagem3.innerHTML += `A perda dos silos seria de <b style="color:red"> R$${perdaSoja.toFixed(2)} </b> em saca de soja, mais <b style="color:red"> R$${totalPreco.toFixed(2)} </b> na perda dos silos, sendo um total de <b style="color:red"> R$${(perdaSoja + totalPreco).toFixed(2)} </b> de prejuizo 
             <br> Total de explosões na última decada: <b style="color:red"> 81 </b>
    <img src="informacao.png" style="width: 20px; cursor: pointer;" onclick="mostrarFonte()">`
        } else
            div_mensagem3.innerHTML += `A média da perda de um silo seria de <b style="color:red"> R$${(perdaSoja / silo).toFixed(2)} </b> em saca de soja, mais <b style="color:red"> R$${(totalPreco / silo).toFixed(2)} </b> na perda dos silos, 
            sendo um total de <b style="color:red"> R$${(perdaSoja / silo + totalPreco / silo).toFixed(2)} </b> de prejuizo
            <b style="color:red"> 81 </b> 
                <img src="informacao.png" style="width: 20px; cursor: pointer;" onclick="mostrarFonte()">`
    }

    function mostrarFonte() {
    alert("Fonte: https://www.purdue.edu/engineering/ABE/agconfinespaces/wp-content/uploads/2022/06/2021-Summary-of-US-Ag-Confined-Space-FINAL-4.19.22.pdf ");
}


</script>